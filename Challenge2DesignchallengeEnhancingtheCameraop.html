<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url(https://themes.googleusercontent.com/fonts/css?kit=5XG6OVxjD8asKTY1ZA2oXz5WjUEXTn8LPH0_Ljy9zOw7SYiU5OL2WB7DwL30IfEQ96H-Vt12YV4CrmHQh1mwroqbV0QXzWITPo6cLDtCRBg);.lst-kix_ixtenr3qopy4-8>li{counter-increment:lst-ctn-kix_ixtenr3qopy4-8}ol.lst-kix_ixtenr3qopy4-7.start{counter-reset:lst-ctn-kix_ixtenr3qopy4-7 0}.lst-kix_hzxrhso39fl-5>li{counter-increment:lst-ctn-kix_hzxrhso39fl-5}ul.lst-kix_ro904zwhwmkl-1{list-style-type:none}ol.lst-kix_hzxrhso39fl-3.start{counter-reset:lst-ctn-kix_hzxrhso39fl-3 0}ul.lst-kix_ro904zwhwmkl-2{list-style-type:none}.lst-kix_9ssxo4pusql2-0>li{counter-increment:lst-ctn-kix_9ssxo4pusql2-0}ul.lst-kix_ro904zwhwmkl-0{list-style-type:none}ul.lst-kix_ro904zwhwmkl-5{list-style-type:none}ol.lst-kix_ixtenr3qopy4-8.start{counter-reset:lst-ctn-kix_ixtenr3qopy4-8 0}ul.lst-kix_ro904zwhwmkl-6{list-style-type:none}ul.lst-kix_ro904zwhwmkl-3{list-style-type:none}ul.lst-kix_ro904zwhwmkl-4{list-style-type:none}ol.lst-kix_ixtenr3qopy4-1.start{counter-reset:lst-ctn-kix_ixtenr3qopy4-1 0}.lst-kix_8st8o4sj6f2l-2>li:before{content:"\0025a0   "}ul.lst-kix_ro904zwhwmkl-7{list-style-type:none}ul.lst-kix_ro904zwhwmkl-8{list-style-type:none}.lst-kix_8st8o4sj6f2l-0>li:before{content:"\0025cf   "}.lst-kix_8st8o4sj6f2l-1>li:before{content:"\0025cb   "}.lst-kix_9ssxo4pusql2-5>li{counter-increment:lst-ctn-kix_9ssxo4pusql2-5}.lst-kix_hzxrhso39fl-7>li{counter-increment:lst-ctn-kix_hzxrhso39fl-7}ol.lst-kix_hzxrhso39fl-4.start{counter-reset:lst-ctn-kix_hzxrhso39fl-4 0}.lst-kix_hzxrhso39fl-1>li{counter-increment:lst-ctn-kix_hzxrhso39fl-1}.lst-kix_8st8o4sj6f2l-8>li:before{content:"\0025a0   "}.lst-kix_8st8o4sj6f2l-6>li:before{content:"\0025cf   "}.lst-kix_8st8o4sj6f2l-7>li:before{content:"\0025cb   "}.lst-kix_ixtenr3qopy4-3>li{counter-increment:lst-ctn-kix_ixtenr3qopy4-3}.lst-kix_8st8o4sj6f2l-3>li:before{content:"\0025cf   "}ol.lst-kix_ixtenr3qopy4-2.start{counter-reset:lst-ctn-kix_ixtenr3qopy4-2 0}.lst-kix_ixtenr3qopy4-6>li{counter-increment:lst-ctn-kix_ixtenr3qopy4-6}.lst-kix_8st8o4sj6f2l-4>li:before{content:"\0025cb   "}.lst-kix_8st8o4sj6f2l-5>li:before{content:"\0025a0   "}.lst-kix_ro904zwhwmkl-4>li:before{content:"\0025cb   "}.lst-kix_ro904zwhwmkl-6>li:before{content:"\0025cf   "}.lst-kix_kfhqxlvvyhu9-7>li:before{content:"\0025cb   "}.lst-kix_hzxrhso39fl-0>li{counter-increment:lst-ctn-kix_hzxrhso39fl-0}ol.lst-kix_hzxrhso39fl-8.start{counter-reset:lst-ctn-kix_hzxrhso39fl-8 0}.lst-kix_9ssxo4pusql2-3>li{counter-increment:lst-ctn-kix_9ssxo4pusql2-3}ol.lst-kix_hzxrhso39fl-7{list-style-type:none}ol.lst-kix_hzxrhso39fl-8{list-style-type:none}ol.lst-kix_hzxrhso39fl-5{list-style-type:none}ol.lst-kix_hzxrhso39fl-6{list-style-type:none}ol.lst-kix_hzxrhso39fl-3{list-style-type:none}ol.lst-kix_hzxrhso39fl-4{list-style-type:none}.lst-kix_kfhqxlvvyhu9-3>li:before{content:"\0025cf   "}ol.lst-kix_hzxrhso39fl-1{list-style-type:none}ol.lst-kix_hzxrhso39fl-2{list-style-type:none}ol.lst-kix_hzxrhso39fl-0{list-style-type:none}.lst-kix_9ssxo4pusql2-2>li:before{content:"" counter(lst-ctn-kix_9ssxo4pusql2-2,lower-roman) ". "}.lst-kix_kfhqxlvvyhu9-1>li:before{content:"\0025cb   "}.lst-kix_9ssxo4pusql2-0>li:before{content:"" counter(lst-ctn-kix_9ssxo4pusql2-0,decimal) ". "}ol.lst-kix_ixtenr3qopy4-3.start{counter-reset:lst-ctn-kix_ixtenr3qopy4-3 0}.lst-kix_ro904zwhwmkl-0>li:before{content:"\0025cf   "}.lst-kix_ro904zwhwmkl-2>li:before{content:"\0025a0   "}ol.lst-kix_ixtenr3qopy4-6.start{counter-reset:lst-ctn-kix_ixtenr3qopy4-6 0}ol.lst-kix_hzxrhso39fl-5.start{counter-reset:lst-ctn-kix_hzxrhso39fl-5 0}.lst-kix_xllf608u08xd-0>li:before{content:"\0025cf   "}.lst-kix_hzxrhso39fl-4>li:before{content:"" counter(lst-ctn-kix_hzxrhso39fl-4,lower-latin) ". "}.lst-kix_hzxrhso39fl-6>li:before{content:"" counter(lst-ctn-kix_hzxrhso39fl-6,decimal) ". "}.lst-kix_xllf608u08xd-2>li:before{content:"\0025a0   "}ol.lst-kix_9ssxo4pusql2-0.start{counter-reset:lst-ctn-kix_9ssxo4pusql2-0 0}.lst-kix_hzxrhso39fl-0>li:before{content:"" counter(lst-ctn-kix_hzxrhso39fl-0,decimal) ". "}.lst-kix_hzxrhso39fl-8>li:before{content:"" counter(lst-ctn-kix_hzxrhso39fl-8,lower-roman) ". "}.lst-kix_ixtenr3qopy4-2>li{counter-increment:lst-ctn-kix_ixtenr3qopy4-2}.lst-kix_xllf608u08xd-6>li:before{content:"\0025cf   "}.lst-kix_xllf608u08xd-4>li:before{content:"\0025cb   "}.lst-kix_hzxrhso39fl-2>li:before{content:"" counter(lst-ctn-kix_hzxrhso39fl-2,lower-roman) ". "}.lst-kix_ro904zwhwmkl-8>li:before{content:"\0025a0   "}.lst-kix_ixtenr3qopy4-3>li:before{content:"" counter(lst-ctn-kix_ixtenr3qopy4-3,decimal) ". "}.lst-kix_ixtenr3qopy4-5>li:before{content:"" counter(lst-ctn-kix_ixtenr3qopy4-5,lower-roman) ". "}.lst-kix_ixtenr3qopy4-1>li:before{content:"" counter(lst-ctn-kix_ixtenr3qopy4-1,lower-latin) ". "}.lst-kix_ixtenr3qopy4-7>li:before{content:"" counter(lst-ctn-kix_ixtenr3qopy4-7,lower-latin) ". "}.lst-kix_ixtenr3qopy4-7>li{counter-increment:lst-ctn-kix_ixtenr3qopy4-7}ol.lst-kix_ixtenr3qopy4-3{list-style-type:none}ul.lst-kix_xllf608u08xd-8{list-style-type:none}ol.lst-kix_ixtenr3qopy4-4{list-style-type:none}ol.lst-kix_ixtenr3qopy4-1{list-style-type:none}.lst-kix_bvvsv7bjr8ia-8>li:before{content:"\0025a0   "}.lst-kix_v6egp2p0vn0k-1>li:before{content:"\0025cb   "}.lst-kix_xllf608u08xd-8>li:before{content:"\0025a0   "}ol.lst-kix_ixtenr3qopy4-2{list-style-type:none}ol.lst-kix_ixtenr3qopy4-7{list-style-type:none}ol.lst-kix_ixtenr3qopy4-8{list-style-type:none}ol.lst-kix_ixtenr3qopy4-5{list-style-type:none}ol.lst-kix_ixtenr3qopy4-6{list-style-type:none}.lst-kix_ixtenr3qopy4-1>li{counter-increment:lst-ctn-kix_ixtenr3qopy4-1}ol.lst-kix_ixtenr3qopy4-0{list-style-type:none}.lst-kix_bvvsv7bjr8ia-0>li:before{content:"\0025cf   "}.lst-kix_v6egp2p0vn0k-7>li:before{content:"\0025cb   "}.lst-kix_9ssxo4pusql2-4>li{counter-increment:lst-ctn-kix_9ssxo4pusql2-4}.lst-kix_v6egp2p0vn0k-3>li:before{content:"\0025cf   "}.lst-kix_v6egp2p0vn0k-5>li:before{content:"\0025a0   "}ol.lst-kix_hzxrhso39fl-7.start{counter-reset:lst-ctn-kix_hzxrhso39fl-7 0}ul.lst-kix_8st8o4sj6f2l-8{list-style-type:none}.lst-kix_bvvsv7bjr8ia-6>li:before{content:"\0025cf   "}ol.lst-kix_ixtenr3qopy4-5.start{counter-reset:lst-ctn-kix_ixtenr3qopy4-5 0}ul.lst-kix_8st8o4sj6f2l-4{list-style-type:none}ul.lst-kix_8st8o4sj6f2l-5{list-style-type:none}ul.lst-kix_8st8o4sj6f2l-6{list-style-type:none}ul.lst-kix_8st8o4sj6f2l-7{list-style-type:none}ul.lst-kix_8st8o4sj6f2l-0{list-style-type:none}ul.lst-kix_8st8o4sj6f2l-1{list-style-type:none}ul.lst-kix_8st8o4sj6f2l-2{list-style-type:none}.lst-kix_bvvsv7bjr8ia-2>li:before{content:"\0025a0   "}.lst-kix_bvvsv7bjr8ia-4>li:before{content:"\0025cb   "}ul.lst-kix_8st8o4sj6f2l-3{list-style-type:none}.lst-kix_kfhqxlvvyhu9-5>li:before{content:"\0025a0   "}ul.lst-kix_kfhqxlvvyhu9-4{list-style-type:none}.lst-kix_hzxrhso39fl-6>li{counter-increment:lst-ctn-kix_hzxrhso39fl-6}ul.lst-kix_kfhqxlvvyhu9-5{list-style-type:none}ul.lst-kix_kfhqxlvvyhu9-2{list-style-type:none}ul.lst-kix_kfhqxlvvyhu9-3{list-style-type:none}ul.lst-kix_kfhqxlvvyhu9-0{list-style-type:none}ul.lst-kix_kfhqxlvvyhu9-1{list-style-type:none}ul.lst-kix_v6egp2p0vn0k-2{list-style-type:none}.lst-kix_9ssxo4pusql2-8>li{counter-increment:lst-ctn-kix_9ssxo4pusql2-8}ul.lst-kix_v6egp2p0vn0k-3{list-style-type:none}ul.lst-kix_v6egp2p0vn0k-4{list-style-type:none}ul.lst-kix_v6egp2p0vn0k-5{list-style-type:none}ul.lst-kix_v6egp2p0vn0k-6{list-style-type:none}ul.lst-kix_kfhqxlvvyhu9-8{list-style-type:none}ul.lst-kix_v6egp2p0vn0k-7{list-style-type:none}ul.lst-kix_v6egp2p0vn0k-8{list-style-type:none}ul.lst-kix_kfhqxlvvyhu9-6{list-style-type:none}ol.lst-kix_9ssxo4pusql2-2.start{counter-reset:lst-ctn-kix_9ssxo4pusql2-2 0}ul.lst-kix_kfhqxlvvyhu9-7{list-style-type:none}ul.lst-kix_v6egp2p0vn0k-0{list-style-type:none}ul.lst-kix_v6egp2p0vn0k-1{list-style-type:none}ul.lst-kix_xllf608u08xd-1{list-style-type:none}.lst-kix_dlawobnydiqy-6>li:before{content:"\0025cf   "}ul.lst-kix_xllf608u08xd-0{list-style-type:none}ul.lst-kix_xllf608u08xd-3{list-style-type:none}ul.lst-kix_xllf608u08xd-2{list-style-type:none}ul.lst-kix_xllf608u08xd-5{list-style-type:none}.lst-kix_dlawobnydiqy-4>li:before{content:"\0025cb   "}.lst-kix_dlawobnydiqy-5>li:before{content:"\0025a0   "}ul.lst-kix_xllf608u08xd-4{list-style-type:none}ul.lst-kix_xllf608u08xd-7{list-style-type:none}ul.lst-kix_xllf608u08xd-6{list-style-type:none}.lst-kix_dlawobnydiqy-2>li:before{content:"\0025a0   "}.lst-kix_dlawobnydiqy-3>li:before{content:"\0025cf   "}ol.lst-kix_ixtenr3qopy4-4.start{counter-reset:lst-ctn-kix_ixtenr3qopy4-4 0}.lst-kix_hzxrhso39fl-8>li{counter-increment:lst-ctn-kix_hzxrhso39fl-8}ol.lst-kix_hzxrhso39fl-6.start{counter-reset:lst-ctn-kix_hzxrhso39fl-6 0}.lst-kix_dlawobnydiqy-0>li:before{content:"\0025cf   "}.lst-kix_dlawobnydiqy-1>li:before{content:"\0025cb   "}.lst-kix_9ssxo4pusql2-6>li{counter-increment:lst-ctn-kix_9ssxo4pusql2-6}ol.lst-kix_9ssxo4pusql2-8.start{counter-reset:lst-ctn-kix_9ssxo4pusql2-8 0}.lst-kix_dlawobnydiqy-7>li:before{content:"\0025cb   "}.lst-kix_dlawobnydiqy-8>li:before{content:"\0025a0   "}.lst-kix_hzxrhso39fl-4>li{counter-increment:lst-ctn-kix_hzxrhso39fl-4}ol.lst-kix_9ssxo4pusql2-7.start{counter-reset:lst-ctn-kix_9ssxo4pusql2-7 0}.lst-kix_9ssxo4pusql2-3>li:before{content:"" counter(lst-ctn-kix_9ssxo4pusql2-3,decimal) ". "}.lst-kix_9ssxo4pusql2-4>li:before{content:"" counter(lst-ctn-kix_9ssxo4pusql2-4,lower-latin) ". "}.lst-kix_ixtenr3qopy4-0>li{counter-increment:lst-ctn-kix_ixtenr3qopy4-0}.lst-kix_9ssxo4pusql2-6>li:before{content:"" counter(lst-ctn-kix_9ssxo4pusql2-6,decimal) ". "}.lst-kix_9ssxo4pusql2-5>li:before{content:"" counter(lst-ctn-kix_9ssxo4pusql2-5,lower-roman) ". "}.lst-kix_9ssxo4pusql2-7>li:before{content:"" counter(lst-ctn-kix_9ssxo4pusql2-7,lower-latin) ". "}ol.lst-kix_9ssxo4pusql2-1.start{counter-reset:lst-ctn-kix_9ssxo4pusql2-1 0}ol.lst-kix_9ssxo4pusql2-6.start{counter-reset:lst-ctn-kix_9ssxo4pusql2-6 0}.lst-kix_9ssxo4pusql2-8>li:before{content:"" counter(lst-ctn-kix_9ssxo4pusql2-8,lower-roman) ". "}.lst-kix_ro904zwhwmkl-3>li:before{content:"\0025cf   "}.lst-kix_ro904zwhwmkl-7>li:before{content:"\0025cb   "}.lst-kix_kfhqxlvvyhu9-4>li:before{content:"\0025cb   "}.lst-kix_kfhqxlvvyhu9-8>li:before{content:"\0025a0   "}.lst-kix_ixtenr3qopy4-4>li{counter-increment:lst-ctn-kix_ixtenr3qopy4-4}.lst-kix_ro904zwhwmkl-5>li:before{content:"\0025a0   "}.lst-kix_kfhqxlvvyhu9-2>li:before{content:"\0025a0   "}.lst-kix_9ssxo4pusql2-1>li:before{content:"" counter(lst-ctn-kix_9ssxo4pusql2-1,lower-latin) ". "}.lst-kix_kfhqxlvvyhu9-0>li:before{content:"\0025cf   "}.lst-kix_9ssxo4pusql2-2>li{counter-increment:lst-ctn-kix_9ssxo4pusql2-2}.lst-kix_ro904zwhwmkl-1>li:before{content:"\0025cb   "}.lst-kix_ixtenr3qopy4-5>li{counter-increment:lst-ctn-kix_ixtenr3qopy4-5}ol.lst-kix_hzxrhso39fl-2.start{counter-reset:lst-ctn-kix_hzxrhso39fl-2 0}.lst-kix_xllf608u08xd-1>li:before{content:"\0025cb   "}ol.lst-kix_9ssxo4pusql2-0{list-style-type:none}.lst-kix_hzxrhso39fl-1>li:before{content:"" counter(lst-ctn-kix_hzxrhso39fl-1,lower-latin) ". "}.lst-kix_hzxrhso39fl-5>li:before{content:"" counter(lst-ctn-kix_hzxrhso39fl-5,lower-roman) ". "}ol.lst-kix_9ssxo4pusql2-1{list-style-type:none}ol.lst-kix_9ssxo4pusql2-2{list-style-type:none}ol.lst-kix_9ssxo4pusql2-3{list-style-type:none}ol.lst-kix_9ssxo4pusql2-4{list-style-type:none}ol.lst-kix_9ssxo4pusql2-5{list-style-type:none}ol.lst-kix_9ssxo4pusql2-6{list-style-type:none}ol.lst-kix_9ssxo4pusql2-3.start{counter-reset:lst-ctn-kix_9ssxo4pusql2-3 0}ol.lst-kix_9ssxo4pusql2-7{list-style-type:none}.lst-kix_xllf608u08xd-7>li:before{content:"\0025cb   "}ol.lst-kix_ixtenr3qopy4-0.start{counter-reset:lst-ctn-kix_ixtenr3qopy4-0 0}ol.lst-kix_9ssxo4pusql2-8{list-style-type:none}.lst-kix_hzxrhso39fl-7>li:before{content:"" counter(lst-ctn-kix_hzxrhso39fl-7,lower-latin) ". "}.lst-kix_hzxrhso39fl-2>li{counter-increment:lst-ctn-kix_hzxrhso39fl-2}.lst-kix_xllf608u08xd-5>li:before{content:"\0025a0   "}.lst-kix_xllf608u08xd-3>li:before{content:"\0025cf   "}.lst-kix_hzxrhso39fl-3>li:before{content:"" counter(lst-ctn-kix_hzxrhso39fl-3,decimal) ". "}.lst-kix_ixtenr3qopy4-4>li:before{content:"" counter(lst-ctn-kix_ixtenr3qopy4-4,lower-latin) ". "}.lst-kix_hzxrhso39fl-3>li{counter-increment:lst-ctn-kix_hzxrhso39fl-3}.lst-kix_ixtenr3qopy4-0>li:before{content:"" counter(lst-ctn-kix_ixtenr3qopy4-0,decimal) ". "}ol.lst-kix_9ssxo4pusql2-4.start{counter-reset:lst-ctn-kix_9ssxo4pusql2-4 0}.lst-kix_ixtenr3qopy4-8>li:before{content:"" counter(lst-ctn-kix_ixtenr3qopy4-8,lower-roman) ". "}.lst-kix_ixtenr3qopy4-6>li:before{content:"" counter(lst-ctn-kix_ixtenr3qopy4-6,decimal) ". "}ul.lst-kix_bvvsv7bjr8ia-8{list-style-type:none}ul.lst-kix_bvvsv7bjr8ia-7{list-style-type:none}ol.lst-kix_hzxrhso39fl-0.start{counter-reset:lst-ctn-kix_hzxrhso39fl-0 0}ul.lst-kix_bvvsv7bjr8ia-6{list-style-type:none}ul.lst-kix_bvvsv7bjr8ia-5{list-style-type:none}ul.lst-kix_bvvsv7bjr8ia-4{list-style-type:none}ul.lst-kix_bvvsv7bjr8ia-3{list-style-type:none}ul.lst-kix_bvvsv7bjr8ia-2{list-style-type:none}.lst-kix_v6egp2p0vn0k-2>li:before{content:"\0025a0   "}ul.lst-kix_bvvsv7bjr8ia-1{list-style-type:none}ul.lst-kix_bvvsv7bjr8ia-0{list-style-type:none}.lst-kix_ixtenr3qopy4-2>li:before{content:"" counter(lst-ctn-kix_ixtenr3qopy4-2,lower-roman) ". "}.lst-kix_v6egp2p0vn0k-0>li:before{content:"\0025cf   "}ol.lst-kix_9ssxo4pusql2-5.start{counter-reset:lst-ctn-kix_9ssxo4pusql2-5 0}.lst-kix_bvvsv7bjr8ia-1>li:before{content:"\0025cb   "}.lst-kix_v6egp2p0vn0k-6>li:before{content:"\0025cf   "}ul.lst-kix_dlawobnydiqy-7{list-style-type:none}ul.lst-kix_dlawobnydiqy-6{list-style-type:none}.lst-kix_9ssxo4pusql2-1>li{counter-increment:lst-ctn-kix_9ssxo4pusql2-1}ul.lst-kix_dlawobnydiqy-5{list-style-type:none}ul.lst-kix_dlawobnydiqy-4{list-style-type:none}ul.lst-kix_dlawobnydiqy-3{list-style-type:none}ul.lst-kix_dlawobnydiqy-2{list-style-type:none}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}ul.lst-kix_dlawobnydiqy-1{list-style-type:none}ul.lst-kix_dlawobnydiqy-0{list-style-type:none}.lst-kix_v6egp2p0vn0k-4>li:before{content:"\0025cb   "}.lst-kix_bvvsv7bjr8ia-7>li:before{content:"\0025cb   "}.lst-kix_bvvsv7bjr8ia-5>li:before{content:"\0025a0   "}ul.lst-kix_dlawobnydiqy-8{list-style-type:none}.lst-kix_bvvsv7bjr8ia-3>li:before{content:"\0025cf   "}.lst-kix_9ssxo4pusql2-7>li{counter-increment:lst-ctn-kix_9ssxo4pusql2-7}ol.lst-kix_hzxrhso39fl-1.start{counter-reset:lst-ctn-kix_hzxrhso39fl-1 0}.lst-kix_v6egp2p0vn0k-8>li:before{content:"\0025a0   "}.lst-kix_kfhqxlvvyhu9-6>li:before{content:"\0025cf   "}ol{margin:0;padding:0}table td,table th{padding:0}.c8{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#333333;border-left-style:solid;border-bottom-width:0pt;width:451.4pt;border-top-color:#000000;border-bottom-style:solid}.c4{-webkit-text-decoration-skip:none;color:#783f04;font-weight:400;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-size:20pt;font-family:"Arial";font-style:normal}.c2{margin-left:36pt;padding-top:12pt;padding-left:0pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c18{padding-top:0pt;padding-bottom:3pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left;height:11pt}.c19{-webkit-text-decoration-skip:none;color:#000000;font-weight:400;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-family:"Arial";font-style:normal}.c7{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:5pt;font-family:"Mukta";font-style:normal}.c24{-webkit-text-decoration-skip:none;color:#1155cc;font-weight:400;text-decoration:underline;text-decoration-skip-ink:none;font-size:14pt;font-family:"Mukta"}.c21{padding-top:0pt;padding-bottom:3pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c14{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-family:"Arial";font-style:normal}.c51{color:#039be5;font-weight:700;text-decoration:none;vertical-align:baseline;font-family:"Proxima Nova";font-style:normal}.c53{padding-top:10pt;padding-bottom:0pt;line-height:1.5;orphans:2;widows:2;text-align:left}.c48{text-decoration-skip-ink:none;font-size:16.5pt;-webkit-text-decoration-skip:none;color:#cc4125;font-weight:700;text-decoration:underline}.c15{padding-top:12pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c10{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c65{padding-top:14pt;padding-bottom:4pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c61{color:#e99249;font-weight:600;text-decoration:none;vertical-align:baseline;font-family:"Google Sans";font-style:normal}.c45{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c63{padding-top:12pt;padding-bottom:2pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c9{background-color:#333333;font-size:7pt;font-family:"Consolas";color:#ffffff;font-weight:400}.c12{background-color:#333333;font-size:8pt;font-family:"Consolas";color:#a2fca2;font-weight:400}.c3{background-color:#333333;font-size:7pt;font-family:"Consolas";color:#fcc28c;font-weight:400}.c42{background-color:#333333;font-size:7pt;font-family:"Consolas";color:#d36363;font-weight:400}.c17{background-color:#333333;font-size:8pt;font-family:"Consolas";color:#ffffff;font-weight:400}.c5{background-color:#333333;font-size:7pt;font-family:"Consolas";color:#888888;font-weight:400}.c25{background-color:#333333;font-size:7pt;font-family:"Consolas";color:#a2fca2;font-weight:400}.c26{background-color:#333333;font-size:8pt;font-family:"Consolas";color:#fc9b9b;font-weight:400}.c33{background-color:#333333;font-size:8pt;font-family:"Consolas";color:#fcc28c;font-weight:400}.c32{background-color:#333333;font-size:7pt;font-family:"Consolas";color:#ffffaa;font-weight:400}.c16{text-decoration-skip-ink:none;font-size:15pt;-webkit-text-decoration-skip:none;font-weight:700;text-decoration:underline}.c34{background-color:#333333;font-size:8pt;font-family:"Consolas";color:#ffffaa;font-weight:400}.c28{background-color:#333333;font-size:8pt;font-family:"Consolas";color:#888888;font-weight:400}.c46{background-color:#333333;font-size:7pt;font-family:"Consolas";color:#fc9b9b;font-weight:400}.c20{color:#000000;text-decoration:none;vertical-align:baseline;font-style:normal}.c62{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c49{border-spacing:0;border-collapse:collapse;margin-right:auto}.c47{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c36{font-weight:400;font-size:8pt;font-family:"Mukta"}.c50{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;text-decoration:underline}.c13{font-size:13pt;font-weight:700;font-family:"Mukta"}.c0{font-size:13pt;font-weight:400;font-family:"Mukta"}.c35{font-weight:400;font-size:7pt;font-family:"Mukta"}.c40{font-weight:700;font-size:10pt;font-family:"Arial"}.c22{font-weight:700;font-size:15pt;font-family:"Arial"}.c41{font-size:14pt;font-weight:400;font-family:"Mukta"}.c27{font-size:5pt;font-weight:400;font-family:"Mukta"}.c60{font-family:"Google Sans";color:#039be5;font-weight:600}.c39{font-weight:700;font-family:"Mukta"}.c11{margin-left:72pt;height:11pt}.c64{font-weight:400;font-family:"Mukta"}.c66{font-size:16.5pt;font-weight:700}.c31{margin-left:36pt;padding-left:0pt}.c1{color:inherit;text-decoration:inherit}.c29{padding:0;margin:0}.c37{font-size:15pt;font-weight:700}.c43{margin-left:72pt;padding-left:0pt}.c58{font-size:13pt;font-weight:700}.c30{height:0pt}.c55{font-size:19pt}.c59{font-size:15pt}.c52{font-style:italic}.c56{font-size:11pt}.c23{page-break-after:avoid}.c44{color:#b45f06}.c6{font-size:20pt}.c38{height:11pt}.c57{color:#1155cc}.c54{color:#783f04}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c47 doc-content"><p class="c21 title" id="h.dqkyi8gz0yfo"><span class="c48">Challenge 2: Design challenge -- Enhancing the Camera operation</span><span class="c66"><br><br></span><span class="c52 c55"><br></span><span class="c6 c60">1. About me<br></span></p><p class="c45"><span class="c20 c41">Name: &nbsp; &nbsp; &nbsp; &nbsp; Divyanshu Kumar</span></p><p class="c45 c38"><span class="c7"></span></p><p class="c45"><span class="c41">College: &nbsp; &nbsp; &nbsp;Starex University Gurgaon Haryana<br></span><span class="c27"><br></span><span class="c41">Branch: &nbsp; &nbsp; &nbsp; Computer Science<br></span></p><p class="c45"><span class="c41">Email: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c24"><a class="c1" href="mailto:Kumardivynashu118@gmail.com">Kumardivyanshu118@gmail.com</a></span><span class="c41">&nbsp;<br></span></p><p class="c45"><span class="c41">Country: &nbsp; &nbsp; India<br></span></p><p class="c45"><span class="c41">Timezone: &nbsp;Asia/Kolkata (UTC +05:30)<br></span></p><p class="c45"><span class="c41">Github: &nbsp; &nbsp; &nbsp; </span><span class="c24"><a class="c1" href="https://www.google.com/url?q=https://github.com/d1vyanshu-kumar&amp;sa=D&amp;source=editors&amp;ust=1744126721598692&amp;usg=AOvVaw1jxh33UOp-KdkakUIuh0tN">&nbsp; Github_Link</a></span></p><p class="c53"><span class="c41">Linkedin: &nbsp; &nbsp;</span><span class="c24"><a class="c1" href="https://www.google.com/url?q=https://www.linkedin.com/in/divyanshu-kumar-24026b296/&amp;sa=D&amp;source=editors&amp;ust=1744126721599071&amp;usg=AOvVaw1BRv1qstajRCchaxqJdwmB">Linkedin_Link</a></span><span class="c41"><br>Resume: &nbsp; &nbsp;</span><span class="c24"><a class="c1" href="https://www.google.com/url?q=https://drive.google.com/file/d/1KU7OQ_9T4rMeD_Ut2GCXxM6_KSwfkpCW/view?usp%3Dsharing&amp;sa=D&amp;source=editors&amp;ust=1744126721599383&amp;usg=AOvVaw2BhvplUJZ5-Jpo1ogEDFm0">Resume_Link</a></span></p><p class="c21 title" id="h.ai6xke7gwt61"><span class="c6"><br><br> &nbsp; &nbsp;&rarr; </span><span class="c50 c6 c54">Research on the &lsquo;useFront&rsquo; Property Issue</span><span class="c6 c19"><br></span></p><p class="c21 title" id="h.pvkz6zu4ca3e"><span class="c6 c50"><br></span><span class="c20 c22">Background: </span></p><p class="c15 c23 title" id="h.acho0nffr7m2"><span class="c0">The Camera component in MIT App Inventor allows developers to capture images using a device&rsquo;s camera, as demonstrated in tutorials like </span><span class="c0 c52">Paint Pot Extended with Camera</span><span class="c20 c0">. Historically, the &lsquo;useFront&rsquo; property enabled developers to set the front camera as the default when launching the camera app. However, this functionality has become unreliable with newer Android OS versions, prompting the need for investigation.</span></p><p class="c21 title" id="h.wjj2z6c3p1hi"><span class="c37"><br><br>Investigation: </span><span class="c58"><br><br></span><span class="c20 c0">To understand why &lsquo;useFront&rsquo; stopped working, I explored the App Inventor source code, Android documentation, and community resources. Here&rsquo;s what I found:</span></p><ul class="c29 lst-kix_bvvsv7bjr8ia-0 start"><li class="c2 c23 title li-bullet-0" id="h.wjj2z6c3p1hi-1"><span class="c13">Original Implementation</span><span class="c0">: The &lsquo;useFront&rsquo; property was implemented in the Camera.java file (located in </span><span class="c50 c0 c57"><a class="c1" href="https://www.google.com/url?q=https://github.com/mit-cml/appinventor-sources/blob/ce0fd4f0e552a40df822fdf3cd66bf2293ca538c/appinventor/components/src/com/google/appinventor/components/runtime/Camcorder.java%23L7&amp;sa=D&amp;source=editors&amp;ust=1744126721602595&amp;usg=AOvVaw1AoecAajeGezNci0X7RI_8">appinventor/components/src/com/google/appinventor/components/runtime/</a></span><span class="c20 c0">) using an Intent-based approach. Specifically, it added an extra to the camera Intent&mdash;likely android.intent.extras.CAMERA_FACING&mdash;to specify the front camera. This extra instructed the default camera app to open with the front-facing camera selected.</span></li><li class="c2 c23 title li-bullet-0" id="h.wjj2z6c3p1hi-2"><span class="c13">Changes in Android OS</span><span class="c0">: Reviewing the Android developer documentation, I discovered that CAMERA_FACING is not an officially supported Intent extra. It appears to have been an undocumented feature that some camera apps respected in earlier Android versions (e.g., pre-Android 5.0). However, with updates to the Android OS&mdash;particularly after Android 5.0 (Lollipop)&mdash;and stricter API controls, this extra became inconsistent or was outright ignored by modern camera apps. This is further supported by discussions on Stack Overflow (e.g.,</span><span class="c0"><a class="c1" href="https://www.google.com/url?q=https://stackoverflow.com/questions/39423351/how-can-i-open-front-camera-using-intent-in-android&amp;sa=D&amp;source=editors&amp;ust=1744126721607050&amp;usg=AOvVaw2i8Z4MuRGrbboSzqZf0IgD">&nbsp;</a></span><span class="c50 c0 c57"><a class="c1" href="https://www.google.com/url?q=https://stackoverflow.com/questions/39423351/how-can-i-open-front-camera-using-intent-in-android&amp;sa=D&amp;source=editors&amp;ust=1744126721607318&amp;usg=AOvVaw1yIs1Km9_sAxh4V492IKNa">this thread</a></span><span class="c20 c0">), where developers noted similar failures.</span></li><li class="c2 c23 title li-bullet-0" id="h.wjj2z6c3p1hi-3"><span class="c13">App Inventor Community Insights</span><span class="c0">: A search through the App Inventor GitHub repository revealed issue #180 (</span><span class="c50 c0 c57"><a class="c1" href="https://www.google.com/url?q=https://github.com/mit-cml/appinventor-sources/issues/180&amp;sa=D&amp;source=editors&amp;ust=1744126721608266&amp;usg=AOvVaw008qtjac2c2zo0WjeLmok_">GitHub Issue #180</a></span><span class="c20 c0">), which documents the &lsquo;useFront&rsquo; property&rsquo;s failure across newer devices. Community feedback confirms that the issue affects nearly all devices running Android versions beyond 5.0, aligning with the shift away from undocumented Intent extras.</span></li><li class="c2 c23 title li-bullet-0" id="h.c0rx4qps9b5"><span class="c13">Technical Conclusion</span><span class="c20 c0">: The root cause is the Camera component&rsquo;s reliance on an unsupported Intent extra that modern Android versions no longer honor. This approach lacks the robustness needed for consistent camera selection, necessitating a redesign using official Android APIs.</span></li></ul><p class="c21 title" id="h.bzc6c5s2ack3"><span class="c58"><br></span><span class="c37">Findings: </span><span class="c6"><br></span><span class="c0">The &lsquo;</span><span class="c13">useFront</span><span class="c0">&rsquo; property stopped functioning because it depended on an undocumented and deprecated Intent extra (</span><span class="c0 c44">android.intent.extras.CAMERA_FACING</span><span class="c20 c0">), which lost support in newer Android OS releases. This explains its inconsistent behavior across devices and highlights the need for a more reliable method to control camera selection, such as leveraging the Android Camera API directly.</span></p><p class="c21 title" id="h.w8okqoz0r27w"><span class="c6"><br> &nbsp; &nbsp; &nbsp; &nbsp; <br> &nbsp; &nbsp; &nbsp; &rarr; </span><span class="c4">Design for Automatic Picture Taking</span></p><p class="c21 title" id="h.au9d83wgdxa0"><span class="c6"><br></span><span class="c20 c22">Objective:</span></p><p class="c21 title" id="h.525ek07t0q17"><span class="c20 c0">To enhance the Camera component, I propose two key improvements:</span></p><ol class="c29 lst-kix_ixtenr3qopy4-0 start" start="1"><li class="c2 c23 title li-bullet-0" id="h.o3s5cltf4iup"><span class="c20 c0">Replace the unreliable &lsquo;useFront&rsquo; property with a more robust mechanism for selecting the camera facing direction.</span></li><li class="c2 c23 title li-bullet-0" id="h.3zzbh5bo2nzi"><span class="c20 c0">Add functionality to take pictures automatically without user intervention, addressing the current limitation where users must manually trigger each shot.</span></li></ol><p class="c10"><span class="c64">These enhancements will make the Camera component more versatile and user-friendly for App Inventor developers, supporting use cases like timed photography or background image capture.<br><br></span><span class="c37">Proposed Design:<br><br></span><span class="c0">I recommend extending the existing Camera component rather than creating a separate one. This keeps all camera-related functionality in a single, familiar place, making it intuitive for users. Below are the proposed changes:<br></span></p><ol class="c29 lst-kix_9ssxo4pusql2-0 start" start="1"><li class="c10 c31 li-bullet-0"><span class="c37">New Property: &quot;CameraFacing&quot;<br></span><span class="c13">Purpose</span><span class="c20 c0">: Replace &lsquo;useFront&rsquo; with a &quot;CameraFacing&quot; property to reliably select the front or back camera.<br><br><br><br><br></span></li></ol><p class="c10"><span class="c13">User Interface</span><span class="c20 c0">:</span></p><ul class="c29 lst-kix_kfhqxlvvyhu9-0 start"><li class="c2 li-bullet-0"><span class="c20 c0">In the App Inventor Designer, &quot;CameraFacing&quot; will appear as a dropdown with options: &quot;Back&quot; (default) and &quot;Front&quot;.</span></li><li class="c2 li-bullet-0"><span class="c20 c0">In the Blocks Editor, it will be available as a property block, allowing dynamic selection during runtime.</span></li></ul><p class="c10"><span class="c13">Why This Approach?</span><span class="c20 c0">: Unlike the old Intent-based method, &quot;CameraFacing&quot; will use the Android Camera API to directly specify the camera, ensuring compatibility and control across devices.<br><br></span></p><ol class="c29 lst-kix_9ssxo4pusql2-0" start="2"><li class="c10 c31 li-bullet-0"><span class="c37">&nbsp;New Method: &quot;TakePictureAutomatically&quot;<br></span></li></ol><ol class="c29 lst-kix_9ssxo4pusql2-1 start" start="1"><li class="c10 c43 li-bullet-0"><span class="c13">Purpose</span><span class="c0">: Enable the Camera component to capture an image programmatically without launching the camera app interface.<br></span></li><li class="c10 c43 li-bullet-0"><span class="c13">User Interface</span><span class="c0">: In the Blocks Editor, &quot;TakePictureAutomatically&quot; will appear as a method block under the Camera component. When called, it takes a picture using the selected camera (based on &quot;CameraFacing&quot;) and triggers the existing &quot;AfterPicture&quot; event with the image file path.<br></span></li><li class="c10 c43 li-bullet-0"><span class="c13">Why This Approach?</span><span class="c20 c0">: This method supports automation, such as capturing images at set intervals, and aligns with user expectations by reusing the &quot;AfterPicture&quot; event for consistency.</span></li></ol><p class="c10 c38"><span class="c20 c22"><br><br></span></p><p class="c10"><span class="c37"><br><br><br> </span><span class="c16">Implementation Details:</span><span class="c37"><br><br></span><span class="c20 c13">Add the CameraFacing Property:</span></p><p class="c15"><span class="c20 c0">We&rsquo;ll replace the deprecated useFront boolean with a CameraFacing string property, allowing users to select &quot;Back&quot; or &quot;Front&quot; in the Designer or via blocks. This will determine which camera to use in the new automatic method.<br><br></span></p><table class="c49"><tr class="c30"><td class="c8" colspan="1" rowspan="1"><p class="c62"><span class="c28">// Add this field near the existing private fields (e.g., after &#39;useFront&#39;)</span><span class="c17"><br></span><span class="c33">private</span><span class="c17">&nbsp;String cameraFacing = </span><span class="c12">&quot;Back&quot;</span><span class="c17">;<br></span><span class="c28">/**<br> * Returns the camera facing direction: &quot;Back&quot; or &quot;Front&quot;.<br> */</span><span class="c17"><br></span><span class="c26">@SimpleProperty</span><span class="c17">(category = PropertyCategory.BEHAVIOR,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;description = </span><span class="c12">&quot;Specifies whether the back or front camera should be used.&quot;</span><span class="c17">)<br></span><span class="c33">public</span><span class="c17">&nbsp;String </span><span class="c34">CameraFacing</span><span class="c17">() {<br> &nbsp; &nbsp;</span><span class="c33">return</span><span class="c17">&nbsp;cameraFacing;<br>}<br><br></span><span class="c28">/**<br> * Sets the camera facing direction: &quot;Back&quot; or &quot;Front&quot;.<br> */</span><span class="c17"><br></span><span class="c26">@DesignerProperty</span><span class="c17">(editorType = PropertyTypeConstants.PROPERTY_TYPE_CHOICES,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;defaultValue = </span><span class="c12">&quot;Back&quot;</span><span class="c17">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;choices = {</span><span class="c12">&quot;Back&quot;</span><span class="c17">, </span><span class="c12">&quot;Front&quot;</span><span class="c17">})<br></span><span class="c26">@SimpleProperty</span><span class="c17"><br></span><span class="c33">public</span><span class="c17">&nbsp;</span><span class="c33">void</span><span class="c17">&nbsp;</span><span class="c34">CameraFacing</span><span class="c17">(String facing) {<br> &nbsp; &nbsp;</span><span class="c33">if</span><span class="c17">&nbsp;(</span><span class="c12">&quot;Back&quot;</span><span class="c17">.equals(facing) || </span><span class="c12">&quot;Front&quot;</span><span class="c17">.equals(facing)) {<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c33">this</span><span class="c17">.cameraFacing = facing;<br> &nbsp; &nbsp;} </span><span class="c33">else</span><span class="c17">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c28">// Optionally dispatch an error if an invalid value is set</span><span class="c17"><br> &nbsp; &nbsp; &nbsp; &nbsp;form.dispatchErrorOccurredEvent(</span><span class="c33">this</span><span class="c17">, </span><span class="c12">&quot;CameraFacing&quot;</span><span class="c17">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ErrorMessages.ERROR_ILLEGAL_ARGUMENT, </span><span class="c12">&quot;CameraFacing must be &#39;Back&#39; or &#39;Front&#39;&quot;</span><span class="c17">);<br> &nbsp; &nbsp;}<br>}</span></p></td></tr></table><p class="c15"><span class="c0"><br></span><span class="c20 c13">Notes:</span></p><ul class="c29 lst-kix_dlawobnydiqy-0 start"><li class="c2 li-bullet-0"><span class="c20 c0">The @DesignerProperty annotation uses PROPERTY_TYPE_CHOICES (assumed to be defined elsewhere in App Inventor) to offer a drop down in the Designer.</span></li><li class="c2 li-bullet-0"><span class="c20 c0">I&rsquo;ve added a basic validation check to ensure only &quot;Back&quot; or &quot;Front&quot; is accepted.</span></li><li class="c2 li-bullet-0"><span class="c20 c0">The existing UseFront methods remain but are deprecated, so we won&rsquo;t modify them here.</span></li></ul><h4 class="c63" id="h.889xhvi3twa5"><span class="c20 c39 c56">Step 2: Add the TakePictureAutomatically Method</span></h4><p class="c15"><span class="c20 c0">This method will use the Android Camera API to capture an image programmatically. It will:</span></p><ul class="c29 lst-kix_v6egp2p0vn0k-0 start"><li class="c2 li-bullet-0"><span class="c20 c0">Check permissions (reusing the existing mechanism).</span></li><li class="c2 li-bullet-0"><span class="c20 c0">Select the camera based on cameraFacing.</span></li><li class="c2 li-bullet-0"><span class="c20 c0">Take a picture without a visible preview (using a dummy SurfaceTexture).</span></li><li class="c2 li-bullet-0"><span class="c20 c0">Save the image to a ScopedFile (consistent with the current TakePicture method).</span></li><li class="c2 li-bullet-0"><span class="c20 c0">Trigger the AfterPicture event.</span></li></ul><p class="c10 c38"><span class="c20 c35"></span></p><table class="c49"><tr class="c30"><td class="c8" colspan="1" rowspan="1"><p class="c62"><span class="c5">/**<br> * Takes a picture automatically using the specified camera facing direction without user intervention.<br> * After the picture is taken, the AfterPicture event is triggered with the image path.<br> */</span><span class="c9"><br></span><span class="c46">@SimpleFunction</span><span class="c9">(description = </span><span class="c25">&quot;Takes a picture automatically using the camera specified by CameraFacing.&quot;</span><span class="c9">)<br></span><span class="c3">public</span><span class="c9">&nbsp;</span><span class="c3">void</span><span class="c9">&nbsp;</span><span class="c32">TakePictureAutomatically</span><span class="c9">() {<br> &nbsp; &nbsp;</span><span class="c3">final</span><span class="c9">&nbsp;ScopedFile target = FileUtil.getScopedPictureFile(form, </span><span class="c25">&quot;jpg&quot;</span><span class="c9">);<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c5">// Check permissions, similar to TakePicture</span><span class="c9"><br> &nbsp; &nbsp;</span><span class="c3">if</span><span class="c9">&nbsp;(!havePermission) {<br> &nbsp; &nbsp; &nbsp; &nbsp;String[] permissions;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">if</span><span class="c9">&nbsp;(FileUtil.needsWritePermission(target)) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;permissions = </span><span class="c3">new</span><span class="c9">&nbsp;String[] { CAMERA, WRITE_EXTERNAL_STORAGE };<br> &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c3">else</span><span class="c9">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;permissions = </span><span class="c3">new</span><span class="c9">&nbsp;String[] { CAMERA };<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;form.askPermission(</span><span class="c3">new</span><span class="c9">&nbsp;BulkPermissionRequest(</span><span class="c3">this</span><span class="c9">, </span><span class="c25">&quot;TakePictureAutomatically&quot;</span><span class="c9">, permissions) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c46">@Override</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">public</span><span class="c9">&nbsp;</span><span class="c3">void</span><span class="c9">&nbsp;</span><span class="c32">onGranted</span><span class="c9">() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;havePermission = </span><span class="c3">true</span><span class="c9">;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Camera.</span><span class="c3">this</span><span class="c9">.TakePictureAutomatically();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">return</span><span class="c9">;<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;</span><span class="c5">// Check external storage state, mirroring TakePicture</span><span class="c9"><br> &nbsp; &nbsp;String state = Environment.getExternalStorageState();<br> &nbsp; &nbsp;</span><span class="c3">if</span><span class="c9">&nbsp;(!FileUtil.needsExternalStorage(form, target) || Environment.MEDIA_MOUNTED.equals(state)) {<br> &nbsp; &nbsp; &nbsp; &nbsp;capturePictureAutomatically(target);<br> &nbsp; &nbsp;} </span><span class="c3">else</span><span class="c9">&nbsp;</span><span class="c3">if</span><span class="c9">&nbsp;(Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {<br> &nbsp; &nbsp; &nbsp; &nbsp;form.dispatchErrorOccurredEvent(</span><span class="c3">this</span><span class="c9">, </span><span class="c25">&quot;TakePictureAutomatically&quot;</span><span class="c9">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ErrorMessages.ERROR_MEDIA_EXTERNAL_STORAGE_READONLY);<br> &nbsp; &nbsp;} </span><span class="c3">else</span><span class="c9">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;form.dispatchErrorOccurredEvent(</span><span class="c3">this</span><span class="c9">, </span><span class="c25">&quot;TakePictureAutomatically&quot;</span><span class="c9">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ErrorMessages.ERROR_MEDIA_EXTERNAL_STORAGE_NOT_AVAILABLE);<br> &nbsp; &nbsp;}<br>}<br><br></span><span class="c5">/**<br> * Helper method to capture the picture using the Camera API.<br> &nbsp;*/</span><span class="c9"><br></span><span class="c3">private</span><span class="c9">&nbsp;</span><span class="c3">void</span><span class="c9">&nbsp;</span><span class="c32">capturePictureAutomatically</span><span class="c9">(</span><span class="c3">final</span><span class="c9">&nbsp;ScopedFile target) {<br> &nbsp; &nbsp;</span><span class="c3">int</span><span class="c9">&nbsp;cameraId = getCameraId(cameraFacing);<br> &nbsp; &nbsp;</span><span class="c3">if</span><span class="c9">&nbsp;(cameraId == -</span><span class="c42">1</span><span class="c9">) {<br> &nbsp; &nbsp; &nbsp; &nbsp;form.dispatchErrorOccurredEvent(</span><span class="c3">this</span><span class="c9">, </span><span class="c25">&quot;TakePictureAutomatically&quot;</span><span class="c9">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ErrorMessages.ERROR_NO_CAMERA_FOUND);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">return</span><span class="c9">;<br> &nbsp; &nbsp;}<br><br> &nbsp; &nbsp;Camera camera = </span><span class="c3">null</span><span class="c9">;<br> &nbsp; &nbsp;</span><span class="c3">try</span><span class="c9">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp;camera = Camera.open(cameraId);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">if</span><span class="c9">&nbsp;(camera == </span><span class="c3">null</span><span class="c9">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;form.dispatchErrorOccurredEvent(</span><span class="c3">this</span><span class="c9">, </span><span class="c25">&quot;TakePictureAutomatically&quot;</span><span class="c9">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ErrorMessages.ERROR_CAMERA_FAILED, </span><span class="c25">&quot;Unable to open camera&quot;</span><span class="c9">);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">return</span><span class="c9">;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">// Set up a dummy preview to satisfy Camera API requirements</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;SurfaceTexture surfaceTexture = </span><span class="c3">new</span><span class="c9">&nbsp;SurfaceTexture(</span><span class="c42">0</span><span class="c9">);<br> &nbsp; &nbsp; &nbsp; &nbsp;camera.setPreviewTexture(surfaceTexture);<br> &nbsp; &nbsp; &nbsp; &nbsp;camera.startPreview();<br><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">// Take the picture</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp;camera.takePicture(</span><span class="c3">null</span><span class="c9">, </span><span class="c3">null</span><span class="c9">, </span><span class="c3">new</span><span class="c9">&nbsp;Camera.PictureCallback() {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c46">@Override</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">public</span><span class="c9">&nbsp;</span><span class="c3">void</span><span class="c9">&nbsp;</span><span class="c32">onPictureTaken</span><span class="c9">(</span><span class="c3">byte</span><span class="c9">[] data, Camera camera) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">try</span><span class="c9">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">// Resolve the file path and save the image</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;String fileName = FileUtil.resolveFileName(form, target.getFileName(), target.getScope());<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;File file = </span><span class="c3">new</span><span class="c9">&nbsp;File(fileName);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;File directory = file.getParentFile();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">if</span><span class="c9">&nbsp;(!directory.exists()) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;directory.mkdirs();<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;FileOutputStream fos = </span><span class="c3">new</span><span class="c9">&nbsp;FileOutputStream(file);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fos.write(data);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fos.close();<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c5">// Scan the file and trigger the event</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;scanFileToAdd(file);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AfterPicture(fileName);<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c3">catch</span><span class="c9">&nbsp;(IOException e) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;form.dispatchErrorOccurredEvent(Camera.</span><span class="c3">this</span><span class="c9">, </span><span class="c25">&quot;TakePictureAutomatically&quot;</span><span class="c9">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ErrorMessages.ERROR_CAMERA_FAILED, </span><span class="c25">&quot;Failed to save image: &quot;</span><span class="c9">&nbsp;+ e.getMessage());<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c3">finally</span><span class="c9">&nbsp;{<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;camera.release(); </span><span class="c5">// Always release the camera</span><span class="c9"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp; &nbsp; &nbsp;});<br> &nbsp; &nbsp;} </span><span class="c3">catch</span><span class="c9">&nbsp;(Exception e) {<br> &nbsp; &nbsp; &nbsp; &nbsp;form.dispatchErrorOccurredEvent(</span><span class="c3">this</span><span class="c9">, </span><span class="c25">&quot;TakePictureAutomatically&quot;</span><span class="c9">,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ErrorMessages.ERROR_CAMERA_FAILED, e.getMessage());<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">if</span><span class="c9">&nbsp;(camera != </span><span class="c3">null</span><span class="c9">) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;camera.release();<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp;}<br>}<br><br></span><span class="c5">/**<br> * Returns the camera ID based on the specified facing direction<br>*/</span><span class="c9"><br></span><span class="c3">private</span><span class="c9">&nbsp;</span><span class="c3">int</span><span class="c9">&nbsp;</span><span class="c32">getCameraId</span><span class="c9">(String facing) {<br> &nbsp; &nbsp;</span><span class="c3">int</span><span class="c9">&nbsp;numberOfCameras = Camera.getNumberOfCameras();<br> &nbsp; &nbsp;</span><span class="c3">for</span><span class="c9">&nbsp;(</span><span class="c3">int</span><span class="c9">&nbsp;i = </span><span class="c42">0</span><span class="c9">; i &lt; numberOfCameras; i++) {<br> &nbsp; &nbsp; &nbsp; &nbsp;Camera.CameraInfo info = </span><span class="c3">new</span><span class="c9">&nbsp;Camera.CameraInfo();<br> &nbsp; &nbsp; &nbsp; &nbsp;Camera.getCameraInfo(i, info);<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">if</span><span class="c9">&nbsp;(</span><span class="c25">&quot;Front&quot;</span><span class="c9">.equals(facing) &amp;&amp; info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">return</span><span class="c9">&nbsp;i;<br> &nbsp; &nbsp; &nbsp; &nbsp;} </span><span class="c3">else</span><span class="c9">&nbsp;</span><span class="c3">if</span><span class="c9">&nbsp;(</span><span class="c25">&quot;Back&quot;</span><span class="c9">.equals(facing) &amp;&amp; info.facing == Camera.CameraInfo.CAMERA_FACING_BACK) {<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">return</span><span class="c9">&nbsp;i;<br> &nbsp; &nbsp; &nbsp; &nbsp;}<br> &nbsp; &nbsp;}<br> &nbsp; &nbsp;</span><span class="c3">return</span><span class="c9">&nbsp;</span><span class="c42">0</span><span class="c9">; </span><span class="c5"><br></span><span class="c9">}</span></p></td></tr></table><p class="c10"><span class="c37"><br><br></span><span class="c20 c13">Notes:</span></p><ul class="c29 lst-kix_8st8o4sj6f2l-0 start"><li class="c2 li-bullet-0"><span class="c13">Permissions</span><span class="c20 c0">: Reuses the existing havePermission logic and permission request flow from TakePicture.</span></li><li class="c2 li-bullet-0"><span class="c13">File Handling</span><span class="c20 c0">: Uses ScopedFile and FileUtil.resolveFileName to maintain consistency with the current capturePicture method.</span></li><li class="c2 li-bullet-0"><span class="c13">Error Handling</span><span class="c0 c20">: Checks for camera availability, file I/O errors, and releases the camera in all cases.</span></li><li class="c2 li-bullet-0"><span class="c13">Preview</span><span class="c20 c0">: A dummy SurfaceTexture is used because the Camera API requires a preview surface, even if not displayed.</span></li><li class="c2 li-bullet-0"><span class="c13">Event Triggering</span><span class="c20 c0">: Calls the existing AfterPicture event with the saved image path, matching the current workflow.</span></li></ul><p class="c10"><span class="c37"><br></span><span class="c20 c39 c59">Integration with Existing Code</span></p><ul class="c29 lst-kix_ro904zwhwmkl-0 start"><li class="c2 li-bullet-0"><span class="c39">No Changes to TakePicture</span><span class="c20 c0">: The existing intent-based method remains unchanged for backward compatibility.</span></li><li class="c2 li-bullet-0"><span class="c13">Reuse Existing Methods</span><span class="c20 c0">: scanFileToAdd is reused to ensure the image appears in the media gallery, and AfterPicture is triggered as in the original code.</span></li><li class="c2 li-bullet-0"><span class="c13">Permissions</span><span class="c20 c0">: The permission logic aligns with the existing Initialize and TakePicture methods, assuming CAMERA and possibly WRITE_EXTERNAL_STORAGE are handled by the form.</span></li></ul><p class="c10 c38"><span class="c20 c22"><br></span></p><h3 class="c65" id="h.cq3mzzhpx4b1"><span class="c20 c13">Final Implementation Summary</span></h3><p class="c15"><span class="c20 c0">This implementation:</span></p><ul class="c29 lst-kix_xllf608u08xd-0 start"><li class="c2 li-bullet-0"><span class="c20 c0">Adds a CameraFacing property to select the camera.</span></li><li class="c2 li-bullet-0"><span class="c20 c0">Introduces TakePictureAutomatically for programmatic capture.</span></li><li class="c2 li-bullet-0"><span class="c20 c0">Integrates with the existing Camera.java structure, reusing permissions, file handling, and events.</span></li><li class="c2 li-bullet-0"><span class="c20 c0">Addresses Challenge 2 by fixing useFront and enabling automation.</span></li></ul><p class="c10 c38"><span class="c20 c0"></span></p><p class="c10 c11"><span class="c20 c0"></span></p><p class="c10 c38"><span class="c20 c22"></span></p><p class="c10 c38"><span class="c20 c0"><br></span></p><p class="c10 c38"><span class="c20 c22"><br></span></p><p class="c10 c38"><span class="c20 c22"></span></p><p class="c10 c38"><span class="c14 c56"></span></p><p class="c18 title" id="h.1jliftuttfvf"><span class="c6 c14"><br><br><br></span></p><p class="c10 c38"><span class="c14 c56"><br><br></span></p></body></html>